# Homography Configuration
# Controls which approach is used for computing homography transformations

homography:
  # Primary approach: intrinsic_extrinsic | feature_match | learned
  # - intrinsic_extrinsic: Uses camera calibration parameters and PTZ pose
  #   Best for: PTZ cameras with known parameters, controlled environments
  # - feature_match: Uses feature detection (SIFT/ORB/LoFTR) and matching
  #   Best for: Unknown camera parameters, reference images available
  # - learned: Uses neural network models for homography estimation
  #   Best for: Challenging conditions, when training data is available
  approach: intrinsic_extrinsic

  # Fallback approaches (tried in order if primary fails)
  # Provides robustness when primary approach cannot compute valid homography
  fallback_approaches:
    - feature_match

  # ========================================================================
  # Approach-specific configuration
  # ========================================================================

  # Configuration for intrinsic_extrinsic approach
  intrinsic_extrinsic:
    # Physical sensor width in millimeters
    # Used to convert focal length from mm to pixels
    # Default: 7.18mm (typical for 1/2.8" sensors)
    sensor_width_mm: 7.18

    # Base focal length in millimeters at 1x zoom
    # Scaled linearly with zoom factor for computing intrinsics
    # Default: 5.9mm (typical for PTZ cameras)
    base_focal_length_mm: 5.9

    # Map visualization scale: pixels per meter
    # Higher values = more detail but smaller coverage area
    # Default: 100 pixels/meter (1 meter = 100 pixels on map)
    pixels_per_meter: 100.0

  # Configuration for feature_match approach
  feature_match:
    # Feature detector type: sift | orb | loftr
    # - sift: Scale-Invariant Feature Transform (robust, patented)
    # - orb: Oriented FAST and Rotated BRIEF (fast, free)
    # - loftr: Learned feature matcher (requires deep learning)
    detector: sift

    # Minimum number of feature matches required for valid homography
    # Must be at least 4 (theoretical minimum), recommend 10-20 for robustness
    min_matches: 4

    # RANSAC inlier threshold in pixels
    # Points with reprojection error < threshold are considered inliers
    # Typical range: 1.0-5.0 pixels
    ransac_threshold: 5.0

  # Configuration for learned approach
  learned:
    # Path to trained model weights file
    # Set to null to use default pre-trained model (if available)
    # Format depends on model_type (.pth for PyTorch, .h5 for TensorFlow)
    model_path: null

    # Minimum confidence score for valid homography
    # Range: 0.0-1.0, where 1.0 = highest confidence
    # Higher threshold = more selective, fewer false positives
    confidence_threshold: 0.5
